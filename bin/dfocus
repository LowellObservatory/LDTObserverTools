#!/Users/observer/opt/miniconda3/bin/python

# Set up the environment to import the program
import argparse
import sys
sys.path.append('/Users/observer/opt')
from LDTObserverTools import dfocus

# Parse command line arguments
parser = argparse.ArgumentParser(prog='dfocus',
                    description='DeVeny Collimator Focus Calculator')
parser.add_argument('--flog', action='store', type=str,
                    help='focus log to use (default: last)',
                    default='last')
parser.add_argument('--thresh', action='store', type=float,
                    help='threshold for line detection (default: 100)',
                    default=100.)
parser.add_argument('--nodisplay', action='store_false',
                    help='DO NOT launch Preview.app to display plots')
args = parser.parse_args()

# Giddy Up!
dfocus('.', flog=args.flog, thresh=args.thresh, 
       launch_preview=args.nodisplay)
